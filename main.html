<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <style>
      #searchView {
        height: 100%;
        width: 0;
        overflow: hidden;
        background-color: white;
        position: absolute;
        top: 0;
        left: 0;
        z-index: 2;
      }
      #search {
        float: left;
      }
      #playerView {
        height: 100%;
        width: 100%;
        overflow: hidden;
        background-color: black;
        position: absolute;
        top: 0;
        left: 0;
        z-index: 1;
      }
      #descriptionBox {
        color: #bbbbbb;
        width: 49%;
        float: left;
        text-align: right;
        padding-right: 10px;
        font-size: 12px;
        vertical-align: middle;
      }
      #title {
        color: white;
        font-size: 40px;
      }
      #album {
        color: white;
        font-size: 24px;
      }
      #artist {
        color: white;
        font-size: 24px;
      }
      #coverArtBox {
        color: #bbbbbb;
        width: 49%;
        float: right;
        padding-left: 10px;
        margin: auto;
        vertical-align: middle;
      }
      #searchBox {
        font-size: 18px;
        margin: 10px;
      }
      #songBox {
        font-size: 12px;
        margin: 10px;
      }
      #playlistBox {
        font-size: 12px;
        margin: 10px;
      }
    </style>
  </head>
  <body>
    <script type="text/javascript" src="js/lib_ubuntuone.js"></script>
    <script type="text/javascript" src="js/lib_controller.js"></script>
    <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="js/reflection.js"></script>

    <div id="searchView">
      <input id="searchBox" accesskey="l"/>
      <!--<input type="file" id="files" name="files" />-->
      <select id="songBox" size="10"></select>
      <select id="playlistBox" size="10"></select>
    </div>
    <div id="playerView">
      <audio id="player" autoplay="true"></audio>
      <div id="descriptionBox">
        <label id="title">title</label>
        <br />
        by <label id="artist">artist</label>
        <br />
        from <label id="album">album</label>
      </div>
      <div id="coverArtBox">
        <img id="coverArt" src="images/wholeNote.png"/>
      </div>
    </div>

    <script>
      document.getElementById('searchBox').addEventListener('change', startSearch, false);
//      document.getElementById('files').addEventListener('change', handleFileSelect, false);

      searchForSongs("", collectSongs, null, null);

      $(function() {
        $("#searchBox").on("focus", function(event) {
          $("#searchBox").width($(document).width() - 20 - 4);
          var boxWidth = ($(document).width() / 2) - 20 - 2;
          var boxHeight = $(document).height() - 22 - 46;
          $("#songBox").width(boxWidth);
          $("#songBox").height(boxHeight);
          $("#playlistBox").width(boxWidth);
          $("#playlistBox").height(boxHeight);
          $("#searchView").height($(document).height());
          $("#searchView").animate({
            width: "100%"
          });
        });
        $("#songBox").on("blur", function(event) {
          $("#searchView").animate({
            width: 0
          });
          var selectedElement = $(":selected");
          var song = JSON.parse(unescape(selectedElement[0].value));
          startPlay(song);
          document.getElementById("coverArt").height = $(document).height() * 0.6;
          $("#coverArt").reflect({height: 0.165, opacity: 0.25});
        });
      });
    </script>
  </body>
</html>
